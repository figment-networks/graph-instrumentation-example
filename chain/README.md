# Dummy Chain

This dummy "blockchain" serves as a demonstration on how to instrument node for the
Firehose integration. Instrumenter, "DeepMind" is a part responsible for data
extraction and could be turned on with an environment variable when running the chain
process.

## Building

First, make sure to generate protobuf files:

```bash
make proto
```

Then build the binary:

```bash
make build
```

## Usage

Run `./chain --help` to see list of all available flags:

```
Usage of ./chain:
  -block-rate int
    	Number of blocks to produce per second (default 1)
  -log-level string
    	Log level (default "info")
  -store-dir string
    	Directory to store blocks data (default "./data")
```

To start the chain, run:

```shell
./chain
```

You'll start seeing output like:

```
INFO[2022-01-13T11:55:07-06:00] initializing node
INFO[2022-01-13T11:55:07-06:00] initializing store
INFO[2022-01-13T11:55:07-06:00] initializing engine
INFO[2022-01-13T11:55:07-06:00] starting block producer                       rate=1s
INFO[2022-01-13T11:55:08-06:00] processing block                              hash=6b86b273ff34fce19d6b804eff5a3f5747ada4eaa22f1d49c01e52ddb7875b4b height=1
INFO[2022-01-13T11:55:09-06:00] processing block                              hash=d4735e3a265e16eee03f59718b9b5d03019c07d8b6c51f90da3a666eec13ab35 height=2
INFO[2022-01-13T11:55:10-06:00] processing block                              hash=4e07408562bedb8b60ce05c1decfe3ad16b72230967de01f640b7e4729b49fce height=3
INFO[2022-01-13T11:55:11-06:00] processing block                              hash=4b227777d4dd1fc61c6f884f48641d02b4d121d3fd328cb08b5531fcacdabf8a height=4
INFO[2022-01-13T11:55:12-06:00] processing block                              hash=ef2d127de37b942baad06145e54b0c619a1f22327b2ebbcfbec78f5564afe39d height=5
INFO[2022-01-13T11:55:13-06:00] processing block                              hash=e7f6c011776e8db7cd330b54174fd76f7d0216b612387a5ffcfb81e6f0919683 height=6
```

To enable DeepMind instrumentation:

```
DM_ENABLED=1 ./chain
```

Output will look like:

```
INFO[2022-01-13T11:55:52-06:00] initializing node
INFO[2022-01-13T11:55:52-06:00] initializing store
DEBU[2022-01-13T11:55:52-06:00] creating store root directory                 dir=./data
INFO[2022-01-13T11:55:52-06:00] loading last block                            tip=6
INFO[2022-01-13T11:55:52-06:00] initializing engine
INFO[2022-01-13T11:55:52-06:00] starting block producer                       rate=1s
INFO[2022-01-13T11:55:53-06:00] processing block                              hash=7902699be42c8a8e46fbbb4501726517e86b22c56a189f7625a6da49081b2451 height=7
DMLOG BLOCK_BEGIN 7
DMLOG BLOCK CAcSQDc5MDI2OTliZTQyYzhhOGU0NmZiYmI0NTAxNzI2NTE3ZTg2YjIyYzU2YTE4OWY3NjI1YTZkYTQ5MDgxYjI0NTEaQGU3ZjZjMDExNzc2ZThkYjdjZDMzMGI1NDE3NGZkNzZmN2QwMjE2YjYxMjM4N2E1ZmZjZmI4MWU2ZjA5MTk2ODMqjAEKCHRyYW5zZmVyEkBiMTEwZDg4OWUzNGU2MTdlMmIyYmZmNTdhYWMzNTU3Njc2YzJmNjgxZjM2NWJhZDVhODk2MTVkN2E4MDZmMGY0GgoweERFQURCRUFGIgoweEJBQUFBQUFEKgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQDBlYzE5MmMwZjkwZDEzMzJmMmFiY2E0Mzk4NTk2ZDM5Nzg0MzRlY2JhZTZhYmVhOGZmZDk4OTQxMmI1OTI0NTgaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoEO5rKADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpIBCgh0cmFuc2ZlchJAMWFlNWEwYzkwMDE3Mzk4NzllZjgxMmE3Y2IzZjMyOTQyMzNmNTBlNWQxZGJkZTc0NzFiNDUxNjMzMDdjNmNkORoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoGCgR3NZQAMgQKAicQOAFCHAoOdG9rZW5fdHJhbnNmZXISCgoDZm9vEgNiYXIqkgEKCHRyYW5zZmVyEkBiNjJmODNhYzc5MmJhYWNkMTdmNDI4NTg1NDM3Yzg0NTY2NjlkMGM1MGNmYjVmZGMxMWM5YTY3NTgxZDgxMzExGgoweERFQURCRUFGIgoweEJBQUFBQUFEKgYKBLLQXgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQGI5YjUwYzU5ZjQyNTFlOWQyZDRkYzQ5Mjc1ZWM0NzYwYTNjOTcwYTllNWQ5MjU0OGQwNDg5MzIzNDkzYmFkODUaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoE7msoADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJANWUzZjViZDMyMDYxNTQ3ZjdkMTAzNWQ0NDg2NGU5Mjg2YTE1OTRiOWJkMDUyOWMzMTU5ODhkOWNkMDdiYzU5MxoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBKgXyADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAZmYwM2ViZDU2OWJiZTgzMzg3ZTU2M2NkMTdkZDcxODBiZWI3MmNiOGMyYmZmODY3MDAyYzdhZGQyMjUxNGExMxoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBZaC8ADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFy
DMLOG BLOCK_END 7
INFO[2022-01-13T11:55:54-06:00] processing block                              hash=2c624232cdd221771294dfbb310aca000a0df6ac8b66b696d90ef06fdefb64a3 height=8
DMLOG BLOCK_BEGIN 8
DMLOG BLOCK CAgSQDJjNjI0MjMyY2RkMjIxNzcxMjk0ZGZiYjMxMGFjYTAwMGEwZGY2YWM4YjY2YjY5NmQ5MGVmMDZmZGVmYjY0YTMaQDc5MDI2OTliZTQyYzhhOGU0NmZiYmI0NTAxNzI2NTE3ZTg2YjIyYzU2YTE4OWY3NjI1YTZkYTQ5MDgxYjI0NTEqjAEKCHRyYW5zZmVyEkAyZjIyYTgzZTlhMDllNmQxNzNkODg2MDVmODI2N2FiOTZjMzMxODAxNGU0M2RiZmY5NjY0ODg1ZDUxNmRlMDJhGgoweERFQURCRUFGIgoweEJBQUFBQUFEKgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQGNlZTJlMDA1YzY0ZDdmNGMyODY0ZTgyZDhiMWQ3Mjg3Mzg1MmEyMDliYTYxM2RlOTE4Mzg2Njk2ZjM0OWQxNWUaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoEO5rKADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpIBCgh0cmFuc2ZlchJAODIxYmRjY2I2YTcxYTdlYjIwMDJmN2FhYzc5ZjU4MDk5Y2RjYWIzNWRlZTBkNTgyY2M3MmFiMzJhNzkzOWQ1NRoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoGCgR3NZQAMgQKAicQOAFCHAoOdG9rZW5fdHJhbnNmZXISCgoDZm9vEgNiYXIqkgEKCHRyYW5zZmVyEkBlODMyZjc3N2QzZjc0ZjZmOGYxZmUwNDViZDgxYTBhNDEzNjc2ZGM0ZjVhMDZhMWE1NmMwNDU5NTlhYThhYTg4GgoweERFQURCRUFGIgoweEJBQUFBQUFEKgYKBLLQXgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQGEzNzVlYjQ5YjVhODFjMzA0YTFiMDliZmI2NTgxNzQ2ZmYxZDJhYTFhZGIwN2VjMGI0NDUwMzI5ZTMxOTJiMDYaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoE7msoADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAZjJkODc0Y2YyYTNmNzM0MWNmZGQyYzcwN2I1MWRkY2NkNWEzNjIzOTEzYTk2OGYxMWZlNTFjYzhkNGZjYjFjMBoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBKgXyADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAZmRiNjE2ZDNlZjI1NTBiNTYzMzJkNjRjOGI4YzczYzEwYmU2Njc5YWZkMzAwNjgwMDc3MzkyOTIwNWEzNTkxZRoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBZaC8ADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAZTdjZjNkZTA3OTZmZjFhZjIyOGY3Y2UyYTViMjYyMGNiZDg0MzkyOWE5N2M0MDAyMmU5NjQxYWU0OTdlOGRmNBoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBoTuGADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFy
DMLOG BLOCK_END 8
INFO[2022-01-13T11:55:55-06:00] processing block                              hash=19581e27de7ced00ff1ce50b2047e7a567c76b1cbaebabe5ef03f7c3017bb5b7 height=9
DMLOG BLOCK_BEGIN 9
DMLOG BLOCK CAkSQDE5NTgxZTI3ZGU3Y2VkMDBmZjFjZTUwYjIwNDdlN2E1NjdjNzZiMWNiYWViYWJlNWVmMDNmN2MzMDE3YmI1YjcaQDJjNjI0MjMyY2RkMjIxNzcxMjk0ZGZiYjMxMGFjYTAwMGEwZGY2YWM4YjY2YjY5NmQ5MGVmMDZmZGVmYjY0YTMqjAEKCHRyYW5zZmVyEkA2NDZjMTZiMGY1ZjE5NWI1OTQxNWYxZWIxZGM2NjQzZGRmZWVjZDc1YjBmNGVjYWI2NWZiNjg2NGYwNDgyNWJhGgoweERFQURCRUFGIgoweEJBQUFBQUFEKgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQDg3YjI2NDgxOTVkNGQ2ZWU5ODc1NWI1NWVhODRhNTk3YTMwNjc0MzNjMWIzM2MzZGI4ZTkzMTU2YmMyZTcyNDcaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoEO5rKADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpIBCgh0cmFuc2ZlchJAOGRjYWQzM2FhY2NmM2E1YThkNTZjMmE3OWZlNjhjZTdjMzAyNTk4YmUxZGI4OWI2NWQwNzcxYmNhZWI3YWFjYRoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoGCgR3NZQAMgQKAicQOAFCHAoOdG9rZW5fdHJhbnNmZXISCgoDZm9vEgNiYXIqkgEKCHRyYW5zZmVyEkBlMjg0ZDcwZWYzY2NjNmM3ODc2NjZhMjNiMmUyMDczZDg1YWZmY2FlZjRmOThlZmM2NDRiNDg0MTlmZmI5MGM2GgoweERFQURCRUFGIgoweEJBQUFBQUFEKgYKBLLQXgAyBAoCJxA4AUIcCg50b2tlbl90cmFuc2ZlchIKCgNmb28SA2JhciqSAQoIdHJhbnNmZXISQGRmY2JjMzc0OGZhOGU0YmE0ZTQ5YWZlNjQ4ZTc1NWZmNzg1ZmM0Y2YwOTc4ZTZmZDAyMzFmNDdjOWUwZjY3YWMaCjB4REVBREJFQUYiCjB4QkFBQUFBQUQqBgoE7msoADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAMTE1ZDE0MTNmNTEzYjk0NjQyOTRjNzJhM2E2ZmJjY2IyOWQzNGNhMmQ0ZDZiYTE4NmNhNmM5OGU3OGRhYWNlMBoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBKgXyADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAYzg3OTNmZWIxMGY3OWM0Mjg5MDliYTg5OTUwMDE1YjU5ZDE5NjgzNGNhOWU3ZjE1ZTk1MmU5MGI5NTJjMjliNBoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBZaC8ADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAMmRhZDE4MThjYjVjNDQ0MjY4OWZhNTg2ZWFmMjVlZjU3MmM5NmE0MjgyYTRiZjllMmY3ZGQ5Mjg3MTgwMjg2YRoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUBoTuGADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFyKpMBCgh0cmFuc2ZlchJAYzQ1ZjU3NjUzYzgxYjcyOTNiYWNhOTEwMjEyNmFkZmNhYzIxNzcxZTExYmU3NmE1MWQ0MjliNzY3NmVkMTFhZBoKMHhERUFEQkVBRiIKMHhCQUFBQUFBRCoHCgUB3NZQADIECgInEDgBQhwKDnRva2VuX3RyYW5zZmVyEgoKA2ZvbxIDYmFy
DMLOG BLOCK_END 9
```
